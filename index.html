<!DOCTYPE html>
<html lang="en-us">

<head>
  <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>Unity WebGL Player | WirVsVirus_Simulator</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.blue_grey-amber.min.css" />
  <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <script src="Build/UnityLoader.js"></script>
  <script>
    var unityInstance = UnityLoader.instantiate("unityContainer", "Build/WebGL.json");
  </script>

  <style>
    .unityCard {
      width: 960px;
    }
    .statisticsCard {
      width: 960px;
    }
    .measuresCard {
      width: 550px;
    }
    .sideCardContentBox {
      height: 257px;
    }
    .demo-layout-transparent {
      background: url('https://dfcby4322olzt.cloudfront.net/wp-content/uploads/2020/03/1800x1200_coronavirus_1.jpg') center / cover;
    }
    .demo-layout-transparent .mdl-layout__header,
    .demo-layout-transparent .mdl-layout__drawer-button {
      color: white;
    }

    .sliderLabel {
      display: block;
      position: absolute;
      top: -55px;
      width: 25px;
      height: 25px;
      border-radius: 0 50% 50% 50%;
      background-color: rgb(63, 81, 181);
      transform: rotate(-135deg);
      margin-top: 20px;
    }

    .sliderLabel div {
      line-height: 25px;
      color: #ffffff;
      font-size: 10px;
      font-weight: 300;
      letter-spacing: 1px;
      text-align: center;
      transform: rotate(135deg);
    }

    .sliderLabel.zeroed {
      background-color: rgba(0, 0, 0, 0.3);
    }

    .space {
      height: 35px;
    }
  </style>

  <script>
    var isPaused = true;
    var startedOnce = false;

    function ToggleRunPause() {
      if(isPaused){
        document.getElementById("RunPause").innerHTML = "Pause";
        unityInstance.SendMessage("SimulationControl","Run");
        startedOnce = true;
      }
      else
      {
        if(!startedOnce) {
          document.getElementById("RunPause").innerHTML = "Start";
        }
        else {
          document.getElementById("RunPause").innerHTML = "Resume";
        }
        unityInstance.SendMessage("SimulationControl","Pause");
      }
      isPaused=!isPaused
    }

    $( document ).ready(function() {
      const demoInput = document.getElementById('selfQuarantine');
      const labelMaker = function (e) {
        const input = e.target || e;
        const label = input.parentElement.querySelectorAll('.label')[0] || document.createElement('div');
        const labelInner = label.firstChild || document.createElement('div');
        const parentWidth = input.parentElement.offsetWidth;
        const inputWidth = input.offsetWidth ;
        const labelOffset = (parentWidth - inputWidth) / 2;

        if(input.value == 80) {
          var calcValue = 100;
        }
        else if(input.value == 20) {
          var calcValue = 0;
        }
        else if(input.value == 50){
          // 50%
          var calcValue = 50;
        }

        const labelPosX = inputWidth * (calcValue/100) + ((100 - calcValue) * 14)/100;

        label.classList.add('sliderLabel');
        if (input.value == 0) {
          label.classList.add('zeroed');
        } else {
          label.classList.remove('zeroed');
        }
        labelInner.innerText = input.value + "%";
        label.appendChild(labelInner);
        label.style.left = labelPosX + 'px';
        input.parentElement.appendChild(label);
      };

      demoInput.addEventListener('input', labelMaker);

      window.onload = function() {
        labelMaker(demoInput)
      };
    });
  </script>

</head>



<body>
<div class="demo-layout-transparent mdl-layout mdl-js-layout">
  <header class="mdl-layout__header mdl-layout__header--transparent">
    <div class="mdl-layout__header-row">
      <span class="mdl-layout-title">WirVsVirus_Simulator</span>
      <div class="mdl-layout-spacer"></div>
      <nav class="mdl-navigation">
        <a class="mdl-navigation__link" target="_blank" href="https://wirvsvirushackathon.org/">WirVsVirus Hackathon</a>
      </nav>
    </div>
  </header>

  <div class="mdl-layout__drawer">
    <span class="mdl-layout-title">WirVsVirus Simulator</span>
    <nav class="mdl-navigation">
      <a class="mdl-navigation__link" target="_blank" href="https://wirvsvirushackathon.org/">WirVsVirus Hackathon</a>
      <a class="mdl-navigation__link" target="_blank" href="https://github.com/floAr/WirVsVirus_Simulator">Source on Github</a>
    </nav>
  </div>

  <main id="SiteMain" class="mdl-layout__content">
    <div class="mdl-grid">

      <div class="mdl-cell mdl-cell--7-col">

        <div class="mdl-grid">

          <div class="mdl-cell mdl-cell--12-col">

            <div class="unityCard demo-card-wide mdl-card mdl-shadow--2dp">
              <div id="unityContainer" style="width: 960px; height: 600px; margin: auto"></div>
              <div class="mdl-card__actions mdl-card--border">
                <a id="RunPause" class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" onclick="ToggleRunPause()">Start</a>
              </div>
            </div>

          </div>

        </div>
      </div>

      <div class="mdl-cell mdl-cell--5-col">

        <div class="mdl-grid">

          <div class="mdl-cell mdl-cell--12-col">

            <div class="statisticsCard demo-card-wide mdl-card mdl-shadow--2dp" id="statistics">
              <div class="mdl-card__title">
                <h2 class="mdl-card__title-text">Statistics</h2>
              </div>
              <div class="sideCardContentBox">
                <div class="mdl-card__actions mdl-card--border">

                </div>
              </div>
              <div class="mdl-card__menu">
                <button class="mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect">
                  <i class="material-icons">share</i>
                </button>
              </div>
            </div>

          </div>

          <div class="mdl-cell mdl-cell--12-col">

            <div class="measuresCard demo-card-wide mdl-card mdl-shadow--2dp">
              <div class="mdl-card__title">
                <h2 class="mdl-card__title-text">Measures</h2>
              </div>
              <div class="sideCardContentBox">
                <div class="mdl-card__actions mdl-card--border">

                  <label class="mdl-switch mdl-js-switch mdl-js-ripple-effect" for="switch-0">
                    <input type="checkbox" id="switch-0" class="mdl-switch__input" checked>
                    <span class="mdl-switch__label">Krankenhauskapazitäten erweitern</span>
                  </label>

                  <label class="mdl-switch mdl-js-switch mdl-js-ripple-effect" for="switch-1">
                    <input type="checkbox" id="switch-1" class="mdl-switch__input" checked>
                    <span class="mdl-switch__label">Verhaltensregeln</span>
                  </label>

                  <label class="mdl-switch mdl-js-switch mdl-js-ripple-effect" for="switch-2">
                    <input type="checkbox" id="switch-2" class="mdl-switch__input" checked>
                    <span class="mdl-switch__label">Ausgangssperre</span>
                  </label>

                  <label class="mdl-switch mdl-js-switch mdl-js-ripple-effect" for="switch-3">
                    <input type="checkbox" id="switch-3" class="mdl-switch__input" checked>
                    <span class="mdl-switch__label">Schulen schließen</span>
                  </label>

                  <label class="mdl-switch mdl-js-switch mdl-js-ripple-effect" for="switch-4">
                    <input type="checkbox" id="switch-4" class="mdl-switch__input" checked>
                    <span class="mdl-switch__label">HomeOffice</span>
                  </label>

                  <label class="mdl-switch mdl-js-switch mdl-js-ripple-effect" for="switch-5">
                    <input type="checkbox" id="switch-5" class="mdl-switch__input" checked>
                    <span class="mdl-switch__label">Corona Tests</span>
                  </label>

                  <div class="space"></div>
                  <input id="selfQuarantine" class="mdl-slider mdl-js-slider" type="range" min="20" max="80" value="20" tabindex="0" step="30">
                  <span class="mdl-switch__label">Selbstquarantäne</span>

                </div>
              </div>
            </div>

          </div>

        </div>

      </div>

    </div>

  </main>
</div>
</body>

</html>